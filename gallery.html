---
layout: default
title: Gallery
---

<!-- Exif.js Library -->
<script src="https://cdn.jsdelivr.net/npm/exif-js"></script>

<div class="px-4">
    <!-- Section Header -->
    <div class="max-w-7xl mt-[1rem] mx-auto">
      <div class="lg:text-center">
        <p class="text-2xl font-semibold">Gallery</p>
      </div>
    </div>
    
  <!-- 선택된 이미지 (클릭된 이미지가 표시될 곳) -->
  <div id="selectedImageContainer" class="relative mt-4 mb-8 hidden">
    <img id="selectedImage" src="" alt="Selected Image" class="w-full h-96 object-cover rounded-lg shadow-md cursor-pointer">
    
    <!-- EXIF 데이터 오버레이 -->
    <div id="exifOverlay" class="absolute top-4 left-4 bg-black bg-opacity-50 text-white p-2 rounded-lg hidden">
      <div class="flex flex-col space-y-1 text-xs"> <!-- 세로 정렬 및 작은 글씨 크기 -->
        <!-- 카메라 정보 -->
        <div>
          <i class="fas fa-camera"></i> <span id="cameraInfo"></span>
        </div>
        <!-- 렌즈 정보 -->
        <div>
          <i class="fas fa-expand"></i> <span id="focalLength"></span>
        </div>
        <!-- ISO 정보 -->
        <div>
          <i class="fas fa-adjust"></i> <span id="isoInfo"></span>
        </div>
        <!-- 셔터 속도 -->
        <div>
          <i class="fas fa-clock"></i> <span id="shutterSpeed"></span>
        </div>
        <!-- 조리개 값 -->
        <div>
          <i class="fas fa-circle-notch"></i> <span id="apertureInfo"></span>
        </div>
        <!-- 촬영 날짜 -->
        <div>
          <i class="fas fa-calendar-alt"></i> <span id="dateInfo"></span>
        </div>
      </div>
    </div>
  </div>

  <!-- 나머지 이미지 그리드 -->
  <div id="remainingImagesGrid" class="hidden mt-4 grid grid-cols-2 md:grid-cols-3 gap-4"></div>

  <!-- 전체 이미지 갤러리 그리드 -->
  <div class="grid mt-4 grid-cols-2 md:grid-cols-3 gap-4" id="imageGrid">
    {% for file in site.static_files %}
      {% if file.path contains '_images' %}
      <div class="relative">
        <img src="{{ file.path }}" alt="{{ file.basename }}" onclick="selectImage('{{ file.path }}')" class="w-full h-64 object-cover rounded-lg shadow-md cursor-pointer">
      </div>
      {% endif %}
    {% endfor %}
  </div>
</div>

<!-- JavaScript for Image Selection and EXIF Data Extraction -->
<script>
    const selectedImageContainer = document.getElementById('selectedImageContainer');
    const selectedImage = document.getElementById('selectedImage');
    const exifOverlay = document.getElementById('exifOverlay');
    const imageGrid = document.getElementById('imageGrid');
    const remainingImagesGrid = document.getElementById('remainingImagesGrid');
  
    // 이미지 선택 함수
    function selectImage(imageSrc) {
      // 선택된 이미지의 src 업데이트
      selectedImage.src = imageSrc;
  
      // 이미지를 로드한 후 EXIF 데이터를 로드
      selectedImage.onload = function() {
        loadExifData(selectedImage); // 새로 로드된 이미지를 넘겨줌
      };
  
      // 이미지 그리드를 숨기고 큰 이미지를 표시
      imageGrid.classList.add('hidden');
      remainingImagesGrid.classList.remove('hidden');
      selectedImageContainer.classList.remove('hidden');
  
      // 나머지 이미지를 렌더링
      renderRemainingImages(imageSrc);
  
      // 스크롤을 위로 올림
      window.scrollTo({
        top: 0,
        behavior: 'smooth'
      });
    }
  
    // EXIF 데이터 추출 함수
    function loadExifData(imageElement) {
      exifOverlay.classList.add('hidden'); // 기존 데이터 숨기기
      EXIF.getData(imageElement, function() {
        const camera = EXIF.getTag(this, 'Make') + ' ' + EXIF.getTag(this, 'Model');
        const focalLength = EXIF.getTag(this, 'FocalLength') ? EXIF.getTag(this, 'FocalLength') + 'mm' : 'N/A';
        const iso = EXIF.getTag(this, 'ISOSpeedRatings') || 'N/A';
        let shutterSpeed = EXIF.getTag(this, 'ShutterSpeedValue');
        const aperture = EXIF.getTag(this, 'FNumber') || 'N/A';
        const dateTime = EXIF.getTag(this, 'DateTimeOriginal') || 'N/A';
  
        // 셔터 스피드 소수점 2자리 포맷팅 및 sec 단위 추가
        if (shutterSpeed) {
          shutterSpeed = (shutterSpeed).toFixed(2) + ' sec';
        } else {
          shutterSpeed = 'N/A';
        }
  
        document.getElementById('cameraInfo').innerText = camera;
        document.getElementById('focalLength').innerText = focalLength;
        document.getElementById('isoInfo').innerText = 'ISO ' + iso;
        document.getElementById('shutterSpeed').innerText = shutterSpeed;
        document.getElementById('apertureInfo').innerText = aperture;
        document.getElementById('dateInfo').innerText = dateTime;
  
        // EXIF 데이터를 오버레이에 표시
        exifOverlay.classList.remove('hidden');
      });
    }
  
    // 나머지 이미지 그리드에 표시
    function renderRemainingImages(excludedImageSrc) {
      const allImages = Array.from(document.querySelectorAll('#imageGrid img'));
      const remainingImages = allImages.filter(img => img.src !== excludedImageSrc);
  
      remainingImagesGrid.innerHTML = '';
      remainingImages.forEach(image => {
        const imageWrapper = document.createElement('div');
        imageWrapper.className = 'relative';
        imageWrapper.innerHTML = `<img src="${image.src}" class="w-full h-64 object-cover rounded-lg shadow-md cursor-pointer" onclick="selectImage('${image.src}')">`;
        remainingImagesGrid.appendChild(imageWrapper);
      });
    }
  
    // 큰 이미지를 클릭하면 원래 그리드 상태로 복원
    selectedImage.addEventListener('click', () => {
      selectedImageContainer.classList.add('hidden');
      remainingImagesGrid.classList.add('hidden');
      imageGrid.classList.remove('hidden');
    });
  </script>